################################################################################
# PostgreSQL Cluster Configuration File
#
# This file contains configuration for managing multiple PostgreSQL clusters
# with replication support.
################################################################################

# PostgreSQL binary directory (optional)
# If not set, assumes pg binaries are in PATH
# Example: PG_BIN_DIR="/usr/local/pgsql/bin"
PG_BIN_DIR=""

# Base data directory
# All cluster data will be stored under this directory
# Default structure: BASE_DATA_DIR/cluster<N>_<M>
# With custom prefixes: BASE_DATA_DIR/<prefix><M>
BASE_DATA_DIR="/home/wslu/work/pg/dts/pg_data"

# Cluster-specific data directory prefixes (optional)
# If not set, defaults to "cluster<N>_" for each cluster
# Examples:
#   CLUSTER_1_PREFIX="s1_"   -> nodes: s1_1, s1_2, s1_3, ...
#   CLUSTER_2_PREFIX="s2_"   -> nodes: s2_1, s2_2, s2_3, ...
#   CLUSTER_1_PREFIX="primary_"  -> nodes: primary_1, primary_2, ...
#   CLUSTER_2_PREFIX="standby_"  -> nodes: standby_1, standby_2, ...
CLUSTER_1_PREFIX="s1_"
CLUSTER_2_PREFIX="s2_"

# Base port number
# Each cluster will use a range of 100 ports starting from BASE_PORT
# Cluster 1: BASE_PORT, BASE_PORT+1, BASE_PORT+2, ...
# Cluster 2: BASE_PORT+100, BASE_PORT+101, BASE_PORT+102, ...
BASE_PORT=5432

# Number of clusters to create
# Default: 2
CLUSTER_COUNT=2

# Number of nodes per cluster
# Node 1 is always the primary, subsequent nodes are standbys
# Recommended: 3 or 5 for production use
# Default: 3
NODE_COUNT=3

# WAL (Write-Ahead Logging) level
# Options:
#   - replica : Physical replication (default)
#               Suitable for streaming replication and point-in-time recovery
#   - logical : Logical replication
#               Enables logical decoding and logical replication
# Default: replica
WAL_LEVEL="replica"

# Replication mode
# Options:
#   - async   : Asynchronous replication (异步复制)
#               Fastest, but may lose data if primary fails
#   - quorum  : Quorum-based synchronous replication (半同步/法定人数)
#               Waits for acknowledgment from majority of standbys
#               Balances performance and data safety
#   - sync    : Synchronous replication (强同步)
#               Waits for acknowledgment from ALL standbys
#               Slowest, but guarantees no data loss
# Default: async
REPLICATION_MODE="async"

################################################################################
# Advanced Options (Optional)
################################################################################

# PostgreSQL version-specific settings
# Uncomment and modify if needed

# For PostgreSQL 12+
# RECOVERY_CONF_MODE="standby.signal"

# For PostgreSQL 11 and earlier
# RECOVERY_CONF_MODE="recovery.conf"

################################################################################
# Example Configurations
################################################################################

# Example 1: Development setup (async replication, 2 nodes)
# CLUSTER_COUNT=2
# NODE_COUNT=2
# REPLICATION_MODE="async"
# BASE_PORT=5432
# CLUSTER_1_PREFIX="dev1_"
# CLUSTER_2_PREFIX="dev2_"

# Example 2: Production setup (quorum sync, 5 nodes)
# CLUSTER_COUNT=2
# NODE_COUNT=5
# REPLICATION_MODE="quorum"
# BASE_PORT=5432
# CLUSTER_1_PREFIX="prod1_"
# CLUSTER_2_PREFIX="prod2_"

# Example 3: High-availability setup (full sync, 3 nodes)
# CLUSTER_COUNT=2
# NODE_COUNT=3
# REPLICATION_MODE="sync"
# BASE_PORT=5432
# CLUSTER_1_PREFIX="primary_"
# CLUSTER_2_PREFIX="secondary_"

